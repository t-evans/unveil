/**
 * jQuery Unveil
 * A very lightweight jQuery plugin to lazy load images
 * http://luis-almeida.github.com/unveil
 *
 * Licensed under the MIT license.
 * Copyright 2013 LuÃ­s Almeida
 * https://github.com/luis-almeida
 */

(function(e){var t={threshold:0,$preLoadContent:null,$preLoadWrapper:null,$postLoadWrapper:null,hideOnTransition:true,onLoad:function(e){e.fadeIn()}};e.fn.unveil=function(n){function h(){l=u.filter(function(){var t=e(this),n=r.scrollTop(),s=n+r.height(),o=t.offset().top,u=o+t.height();return u>=n-i&&o<=s+i});f=l.trigger("unveil");u=u.not(f)}var n=e.extend(t,n),r=e(window),i=n.threshold,s=window.devicePixelRatio>1,o=s?"data-src-retina":"data-src",u=this,a=n.onLoad,f,l,c;this.one("unveil",function(){var t=e(this);if(n.$preLoadContent){t.hide();t.before(n.$preLoadContent.addClass("_unveil-preloadcontent"))}else if(n.$preLoadWrapper)t.wrap(n.$preLoadWrapper.addClass("_unveil-preloadwrapper"));c=this.getAttribute(o);c=c||this.getAttribute("data-src");if(c){t.load(function(){var e=t.clone(),r=t.prev("._unveil-preloadcontent"),i=t.parent("._unveil-preloadwrapper"),s;if(n.$postLoadWrapper){var o=n.$postLoadWrapper.clone();o.append(e);s=o}else s=e;if(n.hideOnTransition)s.hide();if(i.length)i.replaceWith(s);else if(r.length)r.replaceWith(s);else t.replaceWith(s);if(a)a(s)}).attr("src",c)}});r.scroll(h);r.resize(h);h();return this}})(jQuery)
